<div class="container mt-4">
  <h2 class="mb-4 text-center">Gestión de Empleados</h2>

  <!-- Formulario reactivo -->
  <form [formGroup]="empleadoForm" (ngSubmit)="guardarEmpleado()">
    <div class="row g-3">
      <div class="col-md-2">
        <input
          type="text"
          class="form-control"
          placeholder="Nombre"
          formControlName="nombre"
        />
        <div
          *ngIf="empleadoForm.get('nombre')?.invalid && empleadoForm.get('nombre')?.touched"
          class="text-danger"
        >
          Nombre es requerido y debe contener solo letras.
        </div>
      </div>
      <div class="col-md-2">
        <input
          type="text"
          class="form-control"
          placeholder="Apellido Paterno"
          formControlName="apellidoPaterno"
        />
        <div
          *ngIf="
            empleadoForm.get('apellidoPaterno')?.invalid &&
            empleadoForm.get('apellidoPaterno')?.touched
          "
          class="text-danger"
        >
          Apellido Paterno es requerido y debe contener solo letras.
        </div>
      </div>
      <div class="col-md-2">
        <input
          type="text"
          class="form-control"
          placeholder="Apellido Materno"
          formControlName="apellidoMaterno"
        />
        <div
          *ngIf="
            empleadoForm.get('apellidoMaterno')?.invalid &&
            empleadoForm.get('apellidoMaterno')?.touched
          "
          class="text-danger"
        >
          Apellido Materno es requerido y debe contener solo letras.
        </div>
      </div>
      <div class="col-md-3">
        <input
          type="text"
          class="form-control"
          placeholder="CURP"
          formControlName="curp"
        />
        <div
          *ngIf="empleadoForm.get('curp')?.invalid && empleadoForm.get('curp')?.touched"
          class="text-danger"
        >
          CURP no tiene el formato correcto.
        </div>
      </div>
      <div class="col-md-2">
        <input
          type="text"
          class="form-control"
          placeholder="Teléfono (10 dígitos)"
          formControlName="telefono"
        />
        <div
          *ngIf="empleadoForm.get('telefono')?.invalid && empleadoForm.get('telefono')?.touched"
          class="text-danger"
        >
          Teléfono debe contener exactamente 10 dígitos.
        </div>
      </div>
      <div class="col-md-1">
        <select class="form-select" formControlName="sexo">
          <option value="" disabled selected>Sexo</option>
          <option value="M">Masculino</option>
          <option value="F">Femenino</option>
        </select>
        <div
          *ngIf="empleadoForm.get('sexo')?.invalid && empleadoForm.get('sexo')?.touched"
          class="text-danger"
        >
          Sexo es obligatorio.
        </div>
      </div>
    </div>
    <div class="mt-3 d-flex justify-content-between">
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="empleadoForm.invalid"
      >
        {{ isEdit ? 'Actualizar Empleado' : 'Agregar Empleado' }}
      </button>
      <button
        type="button"
        class="btn btn-secondary"
        (click)="cancelarEdicion()">
        Cancelar
      </button>
    </div>
  </form>

  <!-- Tabla de empleados -->
  <table class="table table-striped table-bordered mt-4">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Apellido Paterno</th>
        <th>Apellido Materno</th>
        <th>CURP</th>
        <th>Teléfono</th>
        <th>Sexo</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let empleado of empleados">
        <td>{{ empleado.id }}</td>
        <td>{{ empleado.nombre }}</td>
        <td>{{ empleado.apellidoPaterno }}</td>
        <td>{{ empleado.apellidoMaterno }}</td>
        <td>{{ empleado.curp }}</td>
        <td>{{ empleado.telefono }}</td>
        <td>{{ empleado.sexo }}</td>
        <td class="text-center">
          <button
            mat-icon-button
            color="primary"
            (click)="editarEmpleado(empleado)"
          >
            <mat-icon>edit</mat-icon>
          </button>
          <button
            mat-icon-button
            color="warn"
            (click)="eliminarEmpleado(empleado.id)"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
